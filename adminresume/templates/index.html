<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AG German Resume Creator</title>
    <link rel="icon" type="image" href="./447769740_122172937298079668_3611186950548989070_n.jpg">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <style>
        /* Updated Styles for the layout */
        body {
            display: flex;
            margin: 0;
            font-family: Montserrat, Arial, Verdana;
            background: transparent;
        }

        .left-panel {
            width: 25%;
            padding: 20px;
            border-right: 1px solid #ddd;
            background-color: #f3f4f6;
            height: 100vh;
            overflow-y: auto;
        }

        .right-panel {
            width: 75%;
            padding: 20px;
            background-color: #ffffff;
            overflow-y: auto;
            height: 100vh;
        }

        .left-panel input {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .student-list {
            list-style-type: none;
            padding: 0;
            max-height: 70vh;
            overflow-y: auto;
        }

        .student-list li {
            padding: 8px;
            border-bottom: 1px solid #ddd;
        }

        .student-list li:hover {
            background-color: #e0e0e0;
        }
        #preview-summary {
    width: 100%;
    min-height: 50px; /* Minimum height of 50px */
    resize: none; /* Disable manual resizing by the user */
    overflow-y: hidden; /* Hide vertical overflow initially */
    border: none; /* No border for clean appearance */
    font-size: 14px; /* Match the font size to other content */
    font-family: Arial, sans-serif; /* Use a consistent font family */
    color: #333; /* Set text color */
    padding: 0; /* Remove padding */
    line-height: 1.5; /* Improve readability */
}


        /* General font style for all content from Summary to References (except headers) */
#resume .section-content p,
#resume .section-content li,
#resume .section-content input,
#resume .section-content textarea {
    font-size: 14px; /* Set a common font size */
    font-family: Arial, sans-serif; /* Set a common font family */
    color: #333; /* Set a common font color */
    line-height: 1.5; /* Improve readability with line height */
}

/* Specific styles for lists in different sections */
#skills-list,
#Languages-list,
#Interests\ and\ Hobbies-list,
#References-list,
#certifications-list {
    text-align: left; /* Aligns text to the left */
    list-style-type: disc; /* Adds bullet points */
    margin-left: 20px; /* Adds some space from the left */
    padding-left: 0; /* Removes padding to ensure alignment */
}

/* Styles for section headers to remain distinct */
#resume .section-title {
    font-size: 20px; /* Keep the header font size larger */
    color: #007bff; /* Header color */
    border-bottom: 2px solid #007bff; /* Keep the border under the headers */
    padding-bottom: 5px;
}

/* Additional styling for inputs and textareas in the preview to match the text style */
#resume input[type="text"],
#resume textarea {
    border: none; /* Removes border for a clean look */
    width: 100%; /* Ensures full width */
    resize: none; /* Disables resizing for uniformity */
    font-size: 14px; /* Matches the common font size */
    font-family: Arial, sans-serif; /* Matches the common font family */
    color: #333; /* Matches the common font color */
    margin-bottom: 5px; /* Adds spacing between elements */
}

#Interests\ and\ Hobbies-list {
    text-align: left; /* Aligns text to the left */
    list-style-type: disc; /* Adds bullet points */
    margin-left: 20px; /* Adds some space from the left */
    padding-left: 0; /* Removes padding to ensure alignment */
}

/* Left align the list in the References section */
#References-list {
    text-align: left; /* Aligns text to the left */
    list-style-type: disc; /* Adds bullet points */
    margin-left: 20px; /* Adds some space from the left */
    padding-left: 0; /* Removes padding to ensure alignment */
}

#skills-list {
    text-align: left; /* Aligns text to the left */
    list-style-type: disc; /* Adds bullet points */
    margin-left: 20px; /* Adds some space from the left */
    padding-left: 0; /* Removes padding to ensure alignment */
}

/* Left align the list in the Languages section */
#Languages-list {
    text-align: left; /* Aligns text to the left */
    list-style-type: disc; /* Adds bullet points */
    margin-left: 20px; /* Adds some space from the left */
    padding-left: 0; /* Removes padding to ensure alignment */
}

#certifications-list {
    text-align: left; /* Aligns text to the left */
    list-style-type: disc; /* Adds bullet points */
    margin-left: 20px; /* Adds some space from the left */
    padding-left: 0; /* Removes padding to ensure alignment */
}
.file-upload {
        position: relative;
        overflow: hidden;
        margin: 10px;
    }
    .file-upload input[type='file'] {
        position: absolute;
        font-size: 50px;
        opacity: 0;
        right: 0;
        top: 0;
    }
    .file-upload-button {
        border: 2px solid #ee0979;
        color: white;
        background-color: #6441A5;
        padding: 10px 20px;
        border-radius: 5px;
        font-size: 16px;
        font-weight: bold;
    }
    .file-name {
        display: inline-block;
        padding: 10px;
        color: #555;
        vertical-align: top;
        min-width: 240px;
        margin-left: 10px;
    }

input[type="date"]::placeholder {
            color: #888;
            opacity: 1; 
}
        .experience h3, .education h3 {
        text-align: left;
        color: #333;
        font-size: 18px;
        margin: 10px 0;
        }

        .experience h4, .education h4 {
            text-align: left;
            color: #555;
            font-size: 16px;
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .experience ul, .education ul {
            padding-left: 20px;
        }

        .experience li, .education li {
            text-align: left;
        }

 /* Skills section alignment overrides */
.skills h3, .skills ul {
    text-align: left; /* Overrides the center alignment from #msform */
}

.skills ul {
    list-style-position: inside; /* Positions the bullet points inside the list area */
    padding-left: 0; /* Removes padding to align with the start of the section */
}

.skills ul li {
    display: list-item; /* Displays elements as list items */
    margin-left: 20px; /* Adds left margin for better alignment and readability */
}

        * {
            margin: 0;
            padding: 0;
        }


        html {
            height: 100%;
            background: #6441A5;
            background: -webkit-linear-gradient(to left, #6441A5, #2a0845);
        }

        body {
            font-family: Montserrat, Arial, Verdana;
            background: transparent;
        }

        
        #msform {
            text-align: center;
            position: relative;
            margin-top: 30px;
        }

        #msform fieldset {
            background: white;
            border: 0 none;
            border-radius: 0px;
            box-shadow: 0 0 15px 1px rgba(0, 0, 0, 0.4);
            padding: 20px 30px;
            box-sizing: border-box;
            width: 80%;
            margin: 0 10%;
            position: relative;
        }

        #msform fieldset:not(:first-of-type) {
            display: none;
        }

        #msform input, #msform textarea {
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 0px;
            margin-bottom: 10px;
            width: 100%;
            box-sizing: border-box;
            font-family: Montserrat;
            color: #2C3E50;
            font-size: 13px;
        }

        #msform input:focus, #msform textarea:focus {
            border: 1px solid #ee0979;
            outline-width: 0;
            transition: All 0.5s ease-in;
        }

        #msform .action-button {
            width: 100px;
            background: #ee0979;
            font-weight: bold;
            color: white;
            border: 0 none;
            border-radius: 25px;
            cursor: pointer;
            padding: 10px 5px;
            margin: 10px 5px;
        }

        #msform .action-button:hover, #msform .action-button:focus {
            box-shadow: 0 0 0 2px white, 0 0 0 3px #ee0979;
        }

        #msform .action-button-previous {
            width: 100px;
            background: #C5C5F1;
            font-weight: bold;
            color: white;
            border: 0 none;
            border-radius: 25px;
            cursor: pointer;
            padding: 10px 5px;
            margin: 10px 5px;
        }

        #msform .action-button-previous:hover, #msform .action-button-previous:focus {
            box-shadow: 0 0 0 2px white, 0 0 0 3px #C5C5F1;
        }

        .fs-title {
            font-size: 18px;
            text-transform: uppercase;
            color: #2C3E50;
            margin-bottom: 10px;
            letter-spacing: 2px;
            font-weight: bold;
        }

        .fs-subtitle {
            font-weight: normal;
            font-size: 13px;
            color: #666;
            margin-bottom: 20px;
        }

        #progressbar {
    display: flex;
    justify-content: space-between;
    margin-bottom: 30px;
    padding: 0;
    counter-reset: step;
    list-style-type: none;
    position: relative;
    width: 100%; /* Ensure the progress bar spans the entire width */
}

#progressbar li {
    color: black;
    text-transform: uppercase;
    font-size: 9px;
    width: 8%; /* Adjust width for equal spacing */
    text-align: center;
    position: relative;
    letter-spacing: 1px;
    cursor: pointer;
}

#progressbar li:before {
    content: counter(step);
    counter-increment: step;
    width: 24px;
    height: 24px;
    line-height: 26px;
    display: block;
    font-size: 12px;
    color: #333;
    background: rgb(17, 195, 106);;
    border-radius: 25px;
    margin: 0 auto 10px auto;
    z-index: 2; /* Ensure dots are on top */
    position: relative;
}

#progressbar li:after {
    content: '';
    width: 100%;
    height: 2px;
    background: rgb(17, 195, 106);
    position: absolute;
    left: -50%;
    top: 13px; /* Aligns the connecting line */
    z-index: 1; /* Ensure the line is behind the dots */
}

#progressbar li:first-child:after {
    content: none;
}

#progressbar li.active:before, #progressbar li.active:after {
    background: #ee0979; /* Color for the active progress */
    color: white;
}

        .add-another {
            display: block;
            margin: 10px 0;
            padding: 10px;
            width: auto;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 13px;
        }

        .add-another:hover {
            background-color: #45a049;
        }

        .delete-btn {
            background-color: #FF6347;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 13px;
            margin-left: 10px;
            margin-bottom: 10px;
        }

        .delete-btn:hover {
            background-color: #e55342;
        }

        .resume {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7f7f7;
            color: #333;
        }

        .container {
            width: 80%;
            margin: 20px auto;
            background-color: #fff;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header img {
            border-radius: 50%;
            width: 100px;
            height: 100px;
        }

        .header h1 {
            margin: 10px 0;
            font-size: 28px;
            color: #007bff;
        }

        .header p {
            margin: 5px 0;
            font-size: 16px;
            color: #555;
        }

        .section-title {
            font-size: 20px;
            margin-bottom: 10px;
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
        }

        .section-content {
            margin-bottom: 20px;
        }

        .experience, .education, .skills, .open-source {
            margin-bottom: 20px;
        }

        .experience h3, .education h3, .skills h3, .open-source h3 {
            margin: 0;
            font-size: 18px;
            color: #333;
        }

        .experience h4, .education h4 {
            margin: 5px 0;
            font-size: 16px;
            color: #555;
            display: flex;
            justify-content: space-between;
        }

        .skills ul {
            list-style: none;
            padding: 0;
        }

        .skills ul li {
            display: inline-block;
            margin-right: 15px;
            font-size: 14px;
            color: #333;
        }

    </style>
</head>
<body>
    <!-- Left Panel: Student Search -->
    <div class="left-panel">
        <h2>Search Students</h2>
        <div class="version-selection">
            <label for="version" class="version-label">Select Version:</label>
            <select id="version" class="version-dropdown">
                {% for i in students %}
                    <option value="{{ i }}" {% if i == resume.first_name %}selected{% endif %}>{{ i }}</option>
                {% endfor %}
            </select>
        </div>
    </div>

    <!-- Right Panel: Resume Creator Form -->
    <div class="right-panel">
        <!-- Your existing Resume Creator content goes here -->
        <div class="row">
            <div class="col-md-6 col-md-offset-3">
                <form id="msform">
                    <ul id="progressbar">
                        <li class="active"><a href="#personal-info">Personal Information</a></li>
                        <li><a href="#profile-photo">Profile Photo</a></li>
                        <li><a href="#professional-summary">Professional Summary</a></li>
                        <li><a href="#work-experience">Work Experience</a></li>
                        <li><a href="#education">Education</a></li>
                        <li><a href="#certifications">Certifications</a></li>
                        <li><a href="#languages">Languages</a></li>
                        <li><a href="#skills">Skills</a></li>
                        <li><a href="#interests-hobbies">Interests and Hobbies</a></li>
                        <li><a href="#references">References</a></li>
                        <li><a href="#preview">Preview</a></li>
                        <li><a href="#Save">Save</a></li>
                        <li><a href="#Download">Download Resume</a></li>
                    </ul>
    
                    <!-- Personal Information -->

                    <fieldset>
                        <h2 class="fs-title">Personal Information</h2>
                        <h3 class="fs-subtitle">Tell us something more about you</h3>
                        <input id="firstname" type="text" name="fname" placeholder="First Name" value="{{ resume.personal_information.first_name|default_if_none:'' }}" required/>
                        <input id="lastname" type="text" name="lname" placeholder="Last Name" value="{{ resume.personal_information.last_name|default_if_none:'' }}" required/>
                        <input type="text" id="job_title" name="job_title" placeholder="Job Title" value="{{ resume.personal_information.job_title|default_if_none:'' }}" required/>  
                        <input type="date" id="dateofbirth" name="dateofbirth" placeholder="Date of Birth" value="{{ resume.personal_information.date_of_birth|default_if_none:'' }}" onfocus="(this.type='date')" onblur="if(!this.value) { this.type='text'; }" required/>
                        <input type="email" id="email" name="email" placeholder="Email" value="{{ resume.personal_information.email|default_if_none:'' }}" required/>
                        <input type="text" id="phone" name="phone" placeholder="Phone" value="{{ resume.personal_information.phone|default_if_none:'' }}" required/>
                        <input type="text" id="nationality" name="nationality" placeholder="Nationality" value="{{ resume.personal_information.nationality|default_if_none:'' }}" required/>
                        <input id="address" type="text" name="address" placeholder="Address" value="{{ resume.personal_information.address|default_if_none:'' }}" />
                        <input type="text" id='Status' name="Status" placeholder="Marital Status" value="{{ resume.personal_information.marital_status|default_if_none:'' }}" required/>
                        <input type="button" name="next" class="next action-button" value="Next"/>
                    </fieldset>
                    
                    <!-- Profile Photo -->
                     
                    <fieldset id="profile-photo">
                        <h2 class="fs-title">Profile Photo</h2>
                        <h3 class="fs-subtitle">Upload your profile photo</h3>
                        <input type="file" id="profile-upload"accept="image/*" />
                        <input type="button" name="previous" class="previous action-button-previous" value="Previous"/>
                        <input type="button" name="next" class="next action-button" value="Next"/>
                    </fieldset>
                    
                    <fieldset id="Profile">
                        <h2 class="fs-title">Professional Summary</h2>
                        <h3 class="fs-subtitle">Your professional Summary</h3>
                        <div class="certification-item">
                            <textarea name="profile_summary" id="profile-summary" placeholder="Summary" maxlength="500" style="min-height: 120px;" required>{{ resume.professional_summary|default_if_none:'' }}</textarea>
                        </div>
                        <input type="button" name="previous" class="previous action-button-previous" value="Previous"/>
                        <input type="button" name="next" class="next action-button" value="Next"/>
                    </fieldset>
                    
    
                    <fieldset>
                        <h2 class="fs-title">Work Experience</h2>
                        <h3 class="fs-subtitle">Add your work experience</h3>
                        <div class="work-experience-container">
                            {% for experience in resume.work_experience %}
                            <div class="work-experience-entry">
                                <input type="text" name="company[]" placeholder="Company" value="{{ experience.company }}" required />
                                <input type="text" name="role[]" placeholder="Role" value="{{ experience.role }}" required />
                                <input type="text" name="tenure[]" placeholder="Jan-2023 - Dec-2023" value="{{ experience.tenure }}" required />
                                <textarea id="responsibilities" name="responsibilities_{{ forloop.counter }}[]" placeholder="Responsibilities" style="min-height: 50px;" required>{% for responsibility in experience.responsibilities %}{{ responsibility }}{% if not forloop.last %}&#10;{% endif %}{% endfor %}</textarea>
                                <button type="button" class="delete-btn">Delete</button>
                            </div>
                            {% endfor %}
                        </div>
                        <button type="button" class="add-another">Add Another</button>
                        <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                        <input type="button" name="next" class="next action-button" value="Next" />
                    </fieldset>
                    
    
                    <fieldset id="education">
                        <h2 class="fs-title">Education</h2>
                        <h3 class="fs-subtitle">Your academic background</h3>
                        <div class="education-container">
                            {% for education in resume.education %}
                            <div class="education-item">
                                <input type="text" name="school[]" placeholder="School" value="{{ education.school }}" required/>
                                <input type="text" name="qualification[]" placeholder="Qualification" value="{{ education.qualification }}" required/>
                                <input type="text" name="tenure[]" placeholder="Jan-2023 - Dec-2023" value="{{ education.tenure }}" required/>
                                <button type="button" class="delete-btn">Delete</button>
                            </div>
                            {% endfor %}
                        </div>
                        <button type="button" class="add-another">Add Another</button>
                        <input type="button" name="previous" class="previous action-button-previous" value="Previous"/>
                        <input type="button" name="next" class="next action-button" value="Next"/>
                    </fieldset>
                    
    
                    <!-- Certifications -->
                    <fieldset id="certifications">
                        <h2 class="fs-title">Certifications</h2>
                        <h3 class="fs-subtitle">Your professional certifications</h3>
                        <div class="certification-container">
                            {% for certification in resume.certifications %}
                            <div class="certification-item">
                                <input type="text" name="certification[]" value="{{ certification }}" placeholder="Certification" required/>
                                <button type="button" class="delete-btn">Delete</button>
                            </div>
                            {% endfor %}
                        </div>
                        <button type="button" class="add-another">Add Another</button>
                        <input type="button" name="previous" class="previous action-button-previous" value="Previous"/>
                        <input type="button" name="next" class="next action-button" value="Next"/>
                    </fieldset>

                    <!-- Languages -->
                    <fieldset id="languages">
                        <h2 class="fs-title">Languages</h2>
                        <h3 class="fs-subtitle">Add the languages you are proficient in</h3>
                        <div class="languages-container">
                            {% for language in resume.languages %}
                            <div class="language-entry">
                                <input type="text" name="language[]" value="{{ language }}" placeholder="Language" required/>
                                <button type="button" class="delete-btn">Delete</button>
                            </div>
                            {% endfor %}
                        </div>
                        <button type="button" class="add-another">Add Another</button>
                        <input type="button" name="previous" class="previous action-button-previous" value="Previous"/>
                        <input type="button" name="next" class="next action-button" value="Next"/>
                    </fieldset>

                    <!-- Skills -->
                    <fieldset id="skills-languages">
                        <h2 class="fs-title">Skills</h2>
                        <h3 class="fs-subtitle">Tell us Your abilities</h3>
                        <div class="skills-container">
                            {% for skill in resume.skills %}
                            <div class="skill-item">
                                <input type="text" name="skill[]" value="{{ skill }}" placeholder="Skill" required/>
                                <button type="button" class="delete-btn">Delete</button>
                            </div>
                            {% endfor %}
                        </div>
                        <button type="button" class="add-another">Add Another</button>
                        <input type="button" name="previous" class="previous action-button-previous" value="Previous"/>
                        <input type="button" name="next" class="next action-button" value="Next"/>
                    </fieldset>

                    <!-- Hobbies -->
                    <fieldset id="hobbies-languages">
                        <h2 class="fs-title">Interests and Hobbies</h2>
                        <h3 class="fs-subtitle">Tell Us what you're Into</h3>
                        <div class="hobbies-container">
                            {% for hobby in resume.hobbies %}
                            <div class="hobby-entry">
                                <input type="text" name="hobbies[]" value="{{ hobby }}" placeholder="Hobby" required/>
                                <button type="button" class="delete-btn">Delete</button>
                            </div>
                            {% endfor %}
                        </div>
                        <button type="button" class="add-another">Add Another</button>
                        <input type="button" name="previous" class="previous action-button-previous" value="Previous"/>
                        <input type="button" name="next" class="next action-button" value="Next"/>
                    </fieldset>

                    <!-- References -->
                    <fieldset id="references">
                        <h2 class="fs-title">References</h2>
                        <h3 class="fs-subtitle">List Your Referees</h3>
                        <div class="referees-container">
                            {% for reference in resume.references %}
                            <div class="referees-item">
                                <input type="text" name="Referees[]" value="{{ reference.referee }}" placeholder="Referee" required/>
                                <input type="text" name="Company[]" value="{{ reference.company }}" placeholder="Company" required/>
                                <input type="text" name="contact[]" value="{{ reference.contact }}" placeholder="+2547000000000/myname@gmail.com" required/>
                                <button type="button" class="delete-btn">Delete</button>
                            </div>
                            {% endfor %}
                        </div>
                        <button type="button" class="add-another">Add Another</button>
                        <input type="button" name="previous" class="previous action-button-previous" value="Previous"/>
                        <input type="button" name="next" class="next action-button" value="Next"/>
                    </fieldset>

                    
    
                    <fieldset>
                        <h2 class="fs-title">Preview & Finish</h2>
                        <h3 class="fs-subtitle">Review your details before submitting</h3>
                        <div class="container" id="resume">
                            <div class="header">
                                <img id="cv-image" src="https://via.placeholder.com/120" alt="Profile Photo">
                                <h1><input type="text" id="preview-name" placeholder="Full Name" style="font-size: 20px;
                                    color: #0b3484;
                                    border: 0px solid #ccc;
                                    text-transform: uppercase;
                                    text-align: center;
                                    font-weight: bold;
                                    margin: 0px;
                                    padding: 0px;
                                    margin-bottom: 0px;"/></h1>
                                <p><input type="text" id="preview-title" placeholder="Job Title" style="
                                    border: 0px solid #ccc;
                                    font-size: 15px;
                                    color: #93c9f6;
                                    text-transform: capitalize;
                                    border: none;
                                    text-align: center;
                                    font-weight: bold;
                                    unicode-bidi: isolate;
                                    padding: 0px;
                                    margin-bottom: 0px;
                                    " readonly/></p>
                                <p><input type="text" id="preview-contacts" placeholder="Contacts" style="
                                text-align: center;
                                margin-bottom: 0px;
                                border: none;
                                padding: 0px;"></p>
                                
                            </div>
                    
                            <div class="summary section-content">
                                <h2 class="section-title" style="color: #0b3484;">Summary</h2>
                                <p> <textarea name="" id="preview-summary" placeholder="Professional Summary" rows="1" style="width: 100%; height: auto; min-height: 100px; max-height: 150px; resize: auto; overflow-y: hidden; border: none;"></textarea></p>
                            </div>
                    
                            <div class="experience section-content">
                                <h2 class="section-title" style="color: #0b3484;">Experience</h2>
                                <div id="experience-list"></div>
                            </div>                        
                    
                            <div class="education section-content">
                                <h2 class="section-title" style="color: #0b3484;">Education</h2>
                                <div id="education-list"></div>
                            </div>
                            
                            <div class="certifictaions section-content">
                                <h2 class="section-title" style="color: #0b3484;">Certifications</h2>
                                <div id="certifications-list"></div>
                            </div>
    
                            <div class="skills section-content">
                                <h2 class="section-title" style="color: #0b3484;">Skills</h2>
                                <div id="skills-list"></div>
                            </div>
    
                            <div class="languages section-content">
                                <h2 class="section-title" style="color: #0b3484;">Languages</h2>
                                <div id="Languages-list"></div>
                            </div>
    
                            <div class="hobbies and interests section-content">
                                <h2 class="section-title" style="color: #0b3484;">Interests and Hobbies</h2>
                                <div id="Interests and Hobbies-list"></div>
                            </div>
    
                            <div class="References section-content">
                                <h2 class="section-title" style="color: #0b3484;">References</h2>
                                <div id="References-list"></div>
                            </div>                        
                    
                        </div>
                    
                        <input type="button" name="previous" class="previous action-button-previous" value="Previous"/>
                        <input type="submit" name="submit" class="next action-button" value="Next"/>
                        
                    </fieldset>
    
                    <fieldset>
                        <h2 class="fs-title">Save Your Data</h2>
                        <h3 class="fs-subtitle">Check all your information before saving</h3>
                        <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                        <input type="button" name="save" class="save action-button" value="Save Data" id="saveDataButton" />
                        <input type="button" name="next" class="next action-button" value="Next" />
                    </fieldset>
    
                    <fieldset>
                        <h2 class="fs-title">Download Resume</h2>
                        <h3 class="fs-subtitle">Download your filled resume as a PDF document</h3>
                        <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                        <button type="button" id="download-word" class="action-button-download" onclick="downloadPDF()">Download</button>
    
                    </fieldset>
    
                    
                </form>
            </div>    
</main>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/docx/7.2.0/docx.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/docx@7.1.1/build/index.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
    $(document).ready(function () {
        // Fetch student names and populate the dropdown
        $.ajax({
            url: '/get_student_names/',  // The URL must match the one defined in urls.py
            method: 'GET',
            success: function (response) {
                if (response.students) {
                    const dropdown = $('#version');  // Assuming 'version' is your dropdown ID
                    dropdown.empty();  // Clear any existing options
    
                    // Populate dropdown with student names
                    response.students.forEach(function (student) {
                        dropdown.append(new Option(student.full_name, student.full_name));
                    });
                } else {
                    alert('Failed to fetch student names.');
                }
            },
            error: function (xhr, status, error) {
                console.error('Error fetching student names:', error);
                alert('An error occurred while fetching student names.');
            }
        });
    });
    </script>
    
    
    <script>
$(document).ready(function () {
    // Fetch data for the highest version on page load
    const highestVersion = $('#version').val();
    fetchDataForVersion(highestVersion);

    // Event listener for the version selector
    $('#version').change(function () {
        const selectedVersion = $(this).val();
        fetchDataForVersion(selectedVersion);
    });

    // Function to fetch data for a specific version
    function fetchDataForVersion(version) {
        if (!version) {
            alert('Please select a version.');
            return;
        }
        $.ajax({
            url: `/get_resume_data/`, // URL must match your backend endpoint
            method: 'GET',
            data: { version: version },
            success: function (response) {
                if (response.success) {
                    populateFormData(response.data);
                } else {
                    alert('Failed to fetch data for version ' + version);
                }
            },
            error: function (xhr, status, error) {
                console.error('Error fetching data:', error);
                alert('An error occurred while fetching data.');
            }
        });
    }

    // Function to populate form fields with fetched data
    function populateFormData(data) {
    // Populate personal information fields
    $('#firstname').val(data.personal_information.first_name || '');
    $('#lastname').val(data.personal_information.last_name || '');
    $('#email').val(data.personal_information.email || '');
    $('#phone').val(data.personal_information.phone || '');
    $('#job_title').val(data.personal_information.job_title || '');
    $('#dateofbirth').val(data.personal_information.date_of_birth || '');
    $('#nationality').val(data.personal_information.nationality || '');
    $('#address').val(data.personal_information.address || '');
    $('#Status').val(data.personal_information.marital_status || '');

    // Populate professional summary
    $('#profile-summary').val(data.professional_summary || '');

    // Populate profile photo if available
    if (data.profile_photo) {
        $('#cv-image').attr('src', data.profile_photo);
    } else {
        $('#cv-image').attr('src', 'https://via.placeholder.com/120'); // Placeholder image
    }

    // Clear and populate work experience fields
    $('.work-experience-container').empty();
    if (data.work_experience) {
        data.work_experience.forEach(function (exp, index) {
            let experienceEntry = `
                <div class="work-experience-entry">
                    <input type="text" name="company[]" placeholder="Company" value="${exp.company || ''}" required />
                    <input type="text" name="role[]" placeholder="Role" value="${exp.role || ''}" required />
                    <input type="text" name="tenure[]" placeholder="Jan-2023 - Dec-2023" value="${exp.tenure || ''}" required />
                    <textarea name="responsibilities_${index}[]" placeholder="Responsibilities" style="min-height: 50px;" required>${(exp.responsibilities || []).join('\n')}</textarea>
                    <button type="button" class="delete-btn">Delete</button>
                </div>`;
            $('.work-experience-container').append(experienceEntry);
        });
    }

    // Clear and populate education fields
    $('.education-container').empty();
    if (data.education) {
        data.education.forEach(function (edu) {
            let educationEntry = `
                <div class="education-item">
                    <input type="text" name="school[]" placeholder="School" value="${edu.school || ''}" required />
                    <input type="text" name="qualification[]" placeholder="Qualification" value="${edu.qualification || ''}" required />
                    <input type="text" name="tenure[]" placeholder="Jan-2023 - Dec-2023" value="${edu.tenure || ''}" required />
                    <button type="button" class="delete-btn">Delete</button>
                </div>`;
            $('.education-container').append(educationEntry);
        });
    }

    // Clear and populate certifications
    $('.certification-container').empty();
    if (data.certifications) {
        data.certifications.forEach(function (certification) {
            let certificationEntry = `
                <div class="certification-item">
                    <input type="text" name="certification[]" value="${certification || ''}" placeholder="Certification" required/>
                    <button type="button" class="delete-btn">Delete</button>
                </div>`;
            $('.certification-container').append(certificationEntry);
        });
    }

    // Clear and populate languages
    $('.languages-container').empty();
    if (data.languages) {
        data.languages.forEach(function (language) {
            let languageEntry = `
                <div class="language-entry">
                    <input type="text" name="language[]" value="${language || ''}" placeholder="Language" required />
                    <button type="button" class="delete-btn">Delete</button>
                </div>`;
            $('.languages-container').append(languageEntry);
        });
    }

    // Clear and populate skills
    $('.skills-container').empty();
    if (data.skills) {
        data.skills.forEach(function (skill) {
            let skillEntry = `
                <div class="skill-item">
                    <input type="text" name="skill[]" value="${skill || ''}" placeholder="Skill" required />
                    <button type="button" class="delete-btn">Delete</button>
                </div>`;
            $('.skills-container').append(skillEntry);
        });
    }

    // Clear and populate hobbies
    $('.hobbies-container').empty();
    if (data.hobbies) {
        data.hobbies.forEach(function (hobby) {
            let hobbyEntry = `
                <div class="hobby-entry">
                    <input type="text" name="hobbies[]" value="${hobby || ''}" placeholder="Hobby" required />
                    <button type="button" class="delete-btn">Delete</button>
                </div>`;
            $('.hobbies-container').append(hobbyEntry);
        });
    }

    // Clear and populate references
    $('.referees-container').empty();
    if (data.references) {
        data.references.forEach(function (reference) {
            let referenceEntry = `
                <div class="referees-item">
                    <input type="text" name="Referees[]" value="${reference.referee || ''}" placeholder="Referee" required />
                    <input type="text" name="Company[]" value="${reference.company || ''}" placeholder="Company" required />
                    <input type="text" name="contact[]" value="${reference.contact || ''}" placeholder="+2547000000000/myname@gmail.com" required />
                    <button type="button" class="delete-btn">Delete</button>
                </div>`;
            $('.referees-container').append(referenceEntry);
        });
    }

    // Add functionality to delete buttons for dynamically added entries
    $('.delete-btn').click(function () {
        $(this).parent().remove();
    });
    }

});
</script>
<script>
document.getElementById('saveDataButton').addEventListener('click', function () {
    // Gather all form data
    const formData = new FormData(document.getElementById('msform')); // Assuming 'msform' is the ID of your form

    // Convert form data to a JSON object
    const data = {
        personal_information: {},
        professional_summary: '',  // Initialize professional_summary as a string
        certifications: [],
        skills: [],
        hobbies: [],
        languages: [],
        references: [],
        work_experience: [],
        education: []
    };

    // Define a mapping between form field names and backend keys
    const fieldMapping = {
        'fname': 'first_name',
        'lname': 'last_name',
        'dateofbirth': 'date_of_birth',
        'job_title': 'job_title',
        'email': 'email',
        'phone': 'phone',
        'nationality': 'nationality',
        'address': 'address',
        'Status': 'marital_status'
    };

    // Loop through form data and populate the JSON object
    formData.forEach((value, key) => {
        if (key in fieldMapping) {
            // Map personal information fields
            data.personal_information[fieldMapping[key]] = value;
        } else if (key === 'profile_summary') {
            // Handle professional summary
            data.professional_summary = value;
        } else if (key === 'certification[]') {
            // Handle certifications
            data.certifications.push(value);
        } else if (key === 'skill[]') {
            // Handle skills
            data.skills.push(value);
        } else if (key === 'hobbies[]') {
            // Handle hobbies
            data.hobbies.push(value);
        } else if (key === 'language[]') {
            // Handle languages
            data.languages.push(value);
        }
    });

    // Handle multiple references
    const referenceEntries = document.querySelectorAll('.referees-item');
    referenceEntries.forEach((entry) => {
        const referee = entry.querySelector('input[name="Referees[]"]').value;
        const company = entry.querySelector('input[name="Company[]"]').value;
        const contact = entry.querySelector('input[name="contact[]"]').value;
        
        data.references.push({ referee, company, contact });
    });

    // Handle multiple work experience
    const workExperienceEntries = document.querySelectorAll('.work-experience-entry');
    workExperienceEntries.forEach((entry) => {
        const company = entry.querySelector('input[name="company[]"]').value;
        const role = entry.querySelector('input[name="role[]"]').value;
        const tenure = entry.querySelector('input[name="tenure[]"]').value;
        const responsibilities = entry.querySelector('textarea[name^="responsibilities"]').value.split('\n');
        
        data.work_experience.push({ company, role, tenure, responsibilities });
    });

    // Handle multiple education entries
    const educationEntries = document.querySelectorAll('.education-item');
    educationEntries.forEach((entry) => {
        const school = entry.querySelector('input[name="school[]"]').value;
        const qualification = entry.querySelector('input[name="qualification[]"]').value;
        const tenure = entry.querySelector('input[name="tenure[]"]').value;
        
        data.education.push({ school, qualification, tenure });
    });

    console.log('Data to be sent:', data); // Debugging log to check the full data

    // Make an AJAX request to save the data
    fetch('/save_resume/', {  // URL must match the one defined in urls.py
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': '{{ csrf_token }}'  // Add CSRF token for Django
        },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(result => {
        if (result.success) {
            alert('Data saved successfully! Version: ' + result.version);
        } else {
            alert('Failed to save data.');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('An error occurred while saving data.');
    });
});

    </script>
    
<script>
    $(document).ready(function () {
        // Function to handle adding a single new section with delete functionality
        function addNewSection(containerSelector, entryClass, buttonSelector) {
            $(buttonSelector).click(function () {
                // Clone the first entry in the container
                var originalEntry = $(containerSelector).find(entryClass).first(); // Find the first entry as the template
                var newEntry = originalEntry.clone(); // Clone the template entry
    
                // Clear the input and textarea fields in the new entry
                newEntry.find('input, textarea').val(''); 
                
                // Remove any existing delete buttons in the cloned entry
                newEntry.find('.delete-btn').remove(); 
                
                // Add a new delete button to the cloned entry
                newEntry.append('<button type="button" class="delete-btn">Delete</button>');
    
                // Append the new entry to the container
                $(containerSelector).append(newEntry); 
    
                // Add delete button functionality to the new entry
                newEntry.find('.delete-btn').click(function () {
                    $(this).parent().remove();
                });
            });
        }
    
        // Initialize the functionality for Work Experience
        addNewSection('.work-experience-container', '.work-experience-entry', '#work-experience .add-another');
    
        // Initialize the functionality for Education
        addNewSection('.education-container', '.education-item', '#education .add-another');
    
        // Initialize the functionality for Certifications
        addNewSection('.certification-container', '.certification-item', '#certifications .add-another');
    
        // Initialize the functionality for Skills
        addNewSection('.skills-container', '.skill-item', '#skills-languages .add-another');
    
        // Initialize the functionality for Languages
        addNewSection('.languages-container', '.language-entry', '#languages .add-another');
    
        // Initialize the functionality for Interests and Hobbies
        addNewSection('.hobbies-container', '.hobby-entry', '#hobbies-languages .add-another');
    
        // Initialize the functionality for References
        addNewSection('#references', '.referees-item', '#references .add-another');
    
        // Ensure delete buttons are functional for initial items
        $('.delete-btn').click(function () {
            $(this).parent().remove();
        });
    });
    </script>
            
<script>
    document.getElementById('profile-upload').addEventListener('change', function(event) {
    const file = event.target.files[0];
    const reader = new FileReader();

    reader.onload = function(e) {
        document.getElementById('cv-image').src = e.target.result; // Set the image source to the uploaded file
    }

    if (file) {
        reader.readAsDataURL(file); // Read the file as a data URL
    }
    });

</script>  
<script>
$(document).ready(function () {
const progressSteps = document.querySelectorAll('#progressbar li');
const fieldsets = document.querySelectorAll('fieldset');

function navigateToStep(clickedIndex) {
    // Hide all fieldsets and remove 'active' class from all steps
    fieldsets.forEach((fieldset, index) => {
        fieldset.style.display = 'none'; // Hide all fieldsets
        if (index <= clickedIndex) {
            progressSteps[index].classList.add('active'); // Mark previous steps as active
        } else {
            progressSteps[index].classList.remove('active'); // Ensure next steps are not marked active
        }
    });

    // Show the fieldset corresponding to the clicked step
    fieldsets[clickedIndex].style.display = 'block';
}

// Attach click event listeners to each step in the progress bar
progressSteps.forEach((step, index) => {
    step.addEventListener('click', () => {
        navigateToStep(index);
    });
});

// Updated next and previous button functionality to keep them synchronized with the progress bar
$(".next").click(function () {
    let current_fs = $(this).parent();
    let next_fs = $(this).parent().next();
    let currentStepIndex = $("fieldset").index(current_fs);

    // Activate the next step on the progress bar
    $("#progressbar li").eq(currentStepIndex + 1).addClass('active');

    // Show the next fieldset
    next_fs.show();
    current_fs.hide(); // Ensure the current fieldset is hidden
});

$(".previous").click(function () {
    let current_fs = $(this).parent();
    let previous_fs = $(this).parent().prev();
    let currentStepIndex = $("fieldset").index(current_fs);

    // Deactivate the current step and activate the previous step on the progress bar
    $("#progressbar li").eq(currentStepIndex).removeClass('active');

    // Show the previous fieldset
    previous_fs.show();
    current_fs.hide(); // Ensure the current fieldset is hidden
});
});

</script>    
<script>
    $(document).ready(function () {
var current_fs, next_fs, previous_fs;
var opacity;

// Handle "Next" button click
$(".next").click(function () {
    current_fs = $(this).parent();
    next_fs = $(this).parent().next();

    // Activate the next step on the progress bar
    $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

    // Show the next fieldset
    next_fs.show();
    // Hide the current fieldset with style
    current_fs.css({ 'display': 'none' }); // Hide current fieldset
    next_fs.css({ 'opacity': 1 }); // Ensure the next fieldset is fully opaque
});

// Handle "Previous" button click
$(".previous").click(function () {
    current_fs = $(this).parent();
    previous_fs = $(this).parent().prev();

    // De-activate the current step on the progress bar
    $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

    // Show the previous fieldset
    previous_fs.show();
    current_fs.css({ 'display': 'none' }); // Hide current fieldset
});

// Handle direct step navigation via the progress bar
const progressSteps = document.querySelectorAll('#progressbar li');
const fieldsets = document.querySelectorAll('fieldset');

function navigateToStep(clickedIndex) {
    // Remove 'active' class from all steps and hide all fieldsets
    progressSteps.forEach((step, index) => {
        step.classList.remove('active');
        fieldsets[index].style.display = 'none';
    });

    // Add 'active' class back to the clicked step and all previous steps
    for (let i = 0; i <= clickedIndex; i++) {
        progressSteps[i].classList.add('active');
    }

    // Show the corresponding fieldset
    fieldsets[clickedIndex].style.display = 'block';
}

// Attach click event listeners to each step in the progress bar
progressSteps.forEach((step, index) => {
    step.addEventListener('click', () => {
        navigateToStep(index);
    });
});
});


</script>
<script>
    let profileImageDataURL = '';
    const watermarkImagePath = '/static/img/watermark.png'; // Path to your watermark image in the static folder

    // Convert the uploaded profile picture to a Data URL
    document.getElementById('profile-upload').addEventListener('change', function(event) {
        const file = event.target.files[0];
        const reader = new FileReader();

        reader.onload = function(e) {
            profileImageDataURL = e.target.result; // Save the image as a Data URL
            cropImageToCircle(profileImageDataURL, function(croppedImageDataURL) {
                document.getElementById('cv-image').src = croppedImageDataURL; // Display the cropped image in the preview
                profileImageDataURL = croppedImageDataURL; // Update to use the cropped image for the PDF
            });
        };

        if (file) {
            reader.readAsDataURL(file);
        }
    });

    // Function to crop image to a circle
    function cropImageToCircle(imageDataURL, callback) {
        const img = new Image();
        img.onload = function() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const size = Math.min(img.width, img.height);

            canvas.width = size;
            canvas.height = size;

            ctx.beginPath();
            ctx.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2, true);
            ctx.closePath();
            ctx.clip();

            ctx.drawImage(img, (img.width - size) / 2, (img.height - size) / 2, size, size, 0, 0, size, size);

            const croppedImageDataURL = canvas.toDataURL('image/png');
            callback(croppedImageDataURL);
        };

        img.src = imageDataURL;
    }

    async function downloadPDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();

        // Load the watermark image
        const watermarkImage = new Image();
        watermarkImage.src = watermarkImagePath;

        // Add watermark to each page before content
        watermarkImage.onload = function() {
            const pageWidth = doc.internal.pageSize.getWidth();
            const pageHeight = doc.internal.pageSize.getHeight();

            // Draw watermark on the page
            const addWatermarkToPage = () => {
                const watermarkWidth = pageWidth * 0.5; // Adjust width as needed
                const watermarkHeight = watermarkWidth * (watermarkImage.height / watermarkImage.width); // Maintain aspect ratio
                const x = (pageWidth - watermarkWidth) / 2; // Center horizontally
                const y = (pageHeight - watermarkHeight) / 2; // Center vertically
                doc.addImage(watermarkImage, 'PNG', x, y, watermarkWidth, watermarkHeight, '', 'NONE', 0);

                // Set the watermark transparency
                doc.setGState(new doc.GState({opacity: 0.02})); // Adjust opacity as needed (0.0 to 1.0)
                doc.addImage(watermarkImage, 'PNG', x, y, watermarkWidth, watermarkHeight);
                doc.setGState(new doc.GState({opacity: 1})); // Reset opacity back to normal for other content
            };

            // Add watermark to the first page
            addWatermarkToPage();

            const fullName = document.getElementById('preview-name').value;
            const jobTitle = document.getElementById('preview-title').value;
            const summary = document.getElementById('preview-summary').value;
            const contacts = document.getElementById('preview-contacts').value;

            const experienceList = Array.from(document.querySelectorAll('#experience-list > div')).map(div => div.innerText);
            const educationList = Array.from(document.querySelectorAll('#education-list > div')).map(div => div.innerText);
            const certificationsList = Array.from(document.querySelectorAll('#certifications-list li')).map(li => li.innerText);
            const skillsList = Array.from(document.querySelectorAll('#skills-list li')).map(li => li.innerText);
            const languagesList = Array.from(document.querySelectorAll('#Languages-list li')).map(li => li.innerText);
            const hobbiesList = Array.from(document.querySelectorAll('#Interests\\ and\\ Hobbies-list li')).map(li => li.innerText);
            const referencesList = Array.from(document.querySelectorAll('#References-list  li')).map(li => li.innerText);

            const educationEntries = document.querySelectorAll('#education .education-item');
            const experienceEntries = document.querySelectorAll('.work-experience-entry');

            let y = 10; // Start position on the PDF

            const margin = 10; // Margin on both sides
            const contentWidth = pageWidth - margin * 2; // Maximum width for content
            const imageWidth = 40;
            const imageX = (pageWidth - imageWidth) / 2;

            if (profileImageDataURL) {
                doc.addImage(profileImageDataURL, 'PNG', imageX, y, imageWidth, imageWidth);
                y += 50;
            }

            doc.setFontSize(20);
            doc.setTextColor('#0b3484'); // Header color for the full name
            doc.setFont("helvetica", "bold");
            const textWidth = doc.getTextWidth(fullName);
            doc.text(fullName, (pageWidth - textWidth) / 2, y);
            y += 7;

            doc.setFontSize(15);
            doc.setTextColor('#93c9f6'); // Header color for job title
            const jobTitleWidth = doc.getTextWidth(jobTitle);
            doc.text(jobTitle, (pageWidth - jobTitleWidth) / 2, y);
            y += 5;

            doc.setFontSize(12);
            doc.setTextColor('#000000'); // Set text color for normal entries
            const contactsWidth = doc.getTextWidth(contacts);
            doc.text(contacts, (pageWidth - contactsWidth) / 2, y);
            y += 10;

            function addCenteredHeaderWithUnderline(text) {
                checkPageOverflowAndAddWatermark();
                doc.setFontSize(16);
                doc.setTextColor('#007bff'); // Header color
                const headerWidth = doc.getTextWidth(text);
                doc.setLineWidth(0.5);
                doc.text(text, (pageWidth - headerWidth) / 2, y);
                doc.setDrawColor('#007bff');
                doc.line(margin, y + 1, pageWidth - margin, y + 1);
                y += 10;
            }

            function addContentToPDF(contentList, spacing = 7) {
                contentList.forEach(content => {
                    const lines = doc.splitTextToSize(content, contentWidth); // Split text to fit the content width
                    lines.forEach(line => {
                        checkPageOverflowAndAddWatermark();
                        doc.text(line, margin, y);
                        y += spacing;
                    });
                });
            }

            function addBulletListToPDF(contentList) {
                contentList.forEach(content => {
                    checkPageOverflowAndAddWatermark();
                    doc.setFont('Arial', 'normal');
                    doc.setFontSize(12); // Match the font size used elsewhere
                    doc.setTextColor(51, 51, 51); // Set text color to black (#333 in RGB)
                    doc.text(` ${content}`, margin, y); // Add bullet point
                    y += 5; // Increase y position for the next line
                });
            }

            function addEducationToPDF(entries) {
                addCenteredHeaderWithUnderline('Education');
                entries.forEach(entry => {
                    const school = entry.querySelector('input[name="school[]"]').value.trim();
                    const qualification = entry.querySelector('input[name="qualification[]"]').value.trim();
                    const tenure = entry.querySelector('input[name="tenure[]"]').value.trim();

                    checkPageOverflowAndAddWatermark();
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(14);
                    doc.setTextColor(51, 51, 51); // Set text color to black (#333 in RGB)
                    doc.text(school, margin, y); // School name

                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(12);
                    doc.text(qualification, margin, y + 7); // Qualification

                    const tenureWidth = doc.getTextWidth(tenure.trim());
                    doc.text(tenure.trim(), pageWidth - margin - tenureWidth, y + 7); // Tenure at the right side

                    y += 15;
                });
            }

            
            function addExperienceToPDF(entries) {
                addCenteredHeaderWithUnderline('Experience');
                entries.forEach(entry => {
                    const company = entry.querySelector('input[name="company[]"]').value.trim();
                    const role = entry.querySelector('input[name="role[]"]').value.trim();
                    const tenure = entry.querySelector('input[name="tenure[]"]').value.trim();
                    const responsibilityElement = entry.querySelector('textarea[name^="responsibilities"]');
                    const responsibilities = responsibilityElement ? responsibilityElement.value.trim().split('\n') : [];

                    checkPageOverflowAndAddWatermark();

                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(14);
                    doc.setTextColor(51, 51, 51); // Set text color to black (#333 in RGB)
                    doc.text(company, margin, y); // Company name

                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(12);
                    doc.text(role, margin, y + 7); // Role

                    const tenureWidth = doc.getTextWidth(tenure.trim());
                    doc.text(tenure.trim(), pageWidth - margin - tenureWidth, y + 7); // Tenure at the right side

                    y += 15;

                    responsibilities.forEach(responsibility => {
                        const wrappedText = doc.splitTextToSize(` ${responsibility}`, pageWidth - margin * 2 - 5);

                        wrappedText.forEach(line => {
                            checkPageOverflowAndAddWatermark();
                            doc.text(line, margin + 5, y);
                            y += 7;
                        });

                        y += 1; // Space between different responsibility entries
                    });

                    y += 5; // Space between different experience entries
                });
            }

            // Check for page overflow and add watermark if new page is added
            function checkPageOverflowAndAddWatermark() {
                if (y + 20 > doc.internal.pageSize.height) {
                    doc.addPage();
                    addWatermarkToPage();
                    y = 10;
                }
            }

            // Add sections to the PDF
            addCenteredHeaderWithUnderline('Professional Summary');
            doc.setFontSize(14);
            doc.setFont('Arial', 'normal');
            doc.setTextColor(51, 51, 51); // Set text color to black (#333)
            const summaryLines = doc.splitTextToSize(summary, contentWidth);
            addContentToPDF(summaryLines, 7);

            addExperienceToPDF(experienceEntries);
            addEducationToPDF(educationEntries);

            addCenteredHeaderWithUnderline('Certifications');
            addBulletListToPDF(certificationsList);

            addCenteredHeaderWithUnderline('Skills');
            addBulletListToPDF(skillsList);

            addCenteredHeaderWithUnderline('Languages');
            addBulletListToPDF(languagesList);

            addCenteredHeaderWithUnderline('Interests and Hobbies');
            addBulletListToPDF(hobbiesList);

            addCenteredHeaderWithUnderline('References');
            addBulletListToPDF(referencesList);

            // Save the PDF file
            doc.save(`${fullName}_Resume.pdf`);
        };
    }
</script>
        
<script>

document.addEventListener('DOMContentLoaded', function () {
const addAnotherReferenceButton = document.querySelector('#references .add-another');
const referencesList = document.getElementById('References-list'); // Make sure you have an element with this ID in your HTML where you want to display the references

function updateReferencesPreview() {
    // Clear previous entries
    referencesList.innerHTML = '';

    // Get all reference entries
    const referenceEntries = document.querySelectorAll('.referees-item');

    referenceEntries.forEach(entry => {
        const referee = entry.querySelector('input[name="Referees[]"]').value.trim();
        const company = entry.querySelector('input[name="Company[]"]').value.trim();
        const contact = entry.querySelector('input[name="contact[]"]').value.trim();

        // Create a new reference block
        if (referee && company && contact) {
            const referenceItem = document.createElement('li');
            referenceItem.textContent = `${referee} from ${company} - Contact: ${contact}`;
            referencesList.appendChild(referenceItem);
        }
    });
}

function attachReferenceInputListeners() {
    document.querySelectorAll('.referees-item input').forEach(input => {
        input.removeEventListener('input', updateReferencesPreview); // Avoid multiple bindings
        input.addEventListener('input', updateReferencesPreview);
    });
}

// Listen for changes in the references fields
attachReferenceInputListeners();

// Update the preview when a new reference entry is added
addAnotherReferenceButton.addEventListener('click', function () {
    setTimeout(() => {
        attachReferenceInputListeners();
        updateReferencesPreview(); // Update preview immediately after adding a new entry
    }, 100); // Short delay to ensure the new entry is added
});

// Listen for delete button clicks
$(document).on('click', '.delete-btn', function() {
    $(this).parent().remove();
    updateReferencesPreview();
});

// Initialize preview with any existing data
updateReferencesPreview();
});

document.addEventListener('DOMContentLoaded', function () {
const addAnotherHobbyButton = document.querySelector('#hobbies-languages .add-another');
const hobbiesList = document.getElementById('Interests and Hobbies-list');
function updateHobbiesPreview() {
    // Clear previous entries
    hobbiesList.innerHTML = '';

    // Get all hobby entries
    const hobbyEntries = document.querySelectorAll('.hobbies-container input[name="hobbies[]"]');

    hobbyEntries.forEach(entry => {
        const hobby = entry.value.trim();

        // Create a new hobby block, assuming you want each hobby to be shown as a list item
        if (hobby) {
            const hobbyItem = document.createElement('li');
            hobbyItem.textContent = hobby;
            hobbiesList.appendChild(hobbyItem);
        }
    });
}

function attachHobbyInputListeners() {
    document.querySelectorAll('.hobbies-container input').forEach(input => {
        input.removeEventListener('input', updateHobbiesPreview); // Avoid multiple bindings
        input.addEventListener('input', updateHobbiesPreview);
    });
}

// Listen for changes in the hobbies fields
attachHobbyInputListeners();

// Update the preview when a new hobby entry is added
addAnotherHobbyButton.addEventListener('click', function() {
    setTimeout(() => {
        attachHobbyInputListeners();
        updateHobbiesPreview(); // Update preview immediately after adding a new entry
    }, 100); // Short delay to ensure the new entry is added
});

// Listen for delete button clicks
$(document).on('click', '.delete-btn', function() {
    $(this).parent().remove();
    updateHobbiesPreview();
});

// Initialize preview with any existing data
updateHobbiesPreview();
});

document.addEventListener('DOMContentLoaded', function () {
const addAnotherLanguageButton = document.querySelector('#languages .add-another');
const languagesList = document.getElementById('Languages-list');
function updateLanguagesPreview() {
    // Clear previous entries
    languagesList.innerHTML = '';

    // Get all language entries
    const languageEntries = document.querySelectorAll('.languages-container input[name="language[]"]');

    languageEntries.forEach(entry => {
        const language = entry.value.trim();

        // Create a new language block, assuming you want each language to be shown as a list item
        if (language) {
            const languageItem = document.createElement('li');
            languageItem.textContent = language;
            languagesList.appendChild(languageItem);
        }
    });
}

function attachLanguageInputListeners() {
    document.querySelectorAll('.languages-container input').forEach(input => {
        input.removeEventListener('input', updateLanguagesPreview); // Avoid multiple bindings
        input.addEventListener('input', updateLanguagesPreview);
    });
}

// Listen for changes in the languages fields
attachLanguageInputListeners();

// Update the preview when a new language entry is added
addAnotherLanguageButton.addEventListener('click', function() {
    setTimeout(() => {
        attachLanguageInputListeners();
        updateLanguagesPreview(); // Update preview immediately after adding a new entry
    }, 100); // Short delay to ensure the new entry is added
});

// Listen for delete button clicks
$(document).on('click', '.delete-btn', function() {
    $(this).parent().remove();
    updateLanguagesPreview();
});

// Initialize preview with any existing data
updateLanguagesPreview();
});


document.addEventListener('DOMContentLoaded', function () {
const addAnotherCertificationButton = document.querySelector('#certifications .add-another');
const certificationsList = document.getElementById('certifications-list');

function updateCertificationsPreview() {
    // Clear previous entries
    certificationsList.innerHTML = '';

    // Get all certification entries
    const certificationEntries = document.querySelectorAll('.certification-item input[name="certification[]"]');

    certificationEntries.forEach(entry => {
        const certification = entry.value.trim();

        // Create a new certification block, assuming you want each certification to be shown as a list item
        if (certification) {
            const certificationItem = document.createElement('li');
            certificationItem.textContent = certification;
            certificationsList.appendChild(certificationItem);
        }
    });
}

function attachCertificationInputListeners() {
    document.querySelectorAll('.certification-item input').forEach(input => {
        input.removeEventListener('input', updateCertificationsPreview); // Avoid multiple bindings
        input.addEventListener('input', updateCertificationsPreview);
    });
}

// Listen for changes in the certification fields
attachCertificationInputListeners();

// Update the preview when a new certification entry is added
addAnotherCertificationButton.addEventListener('click', function() {
    setTimeout(() => {
        attachCertificationInputListeners();
        updateCertificationsPreview(); // Update preview immediately after adding a new entry
    }, 100); // Short delay to ensure the new entry is added
});

// Listen for delete button clicks
$(document).on('click', '.delete-btn', function() {
    $(this).parent().remove();
    updateCertificationsPreview();
});

// Initialize preview with any existing data
updateCertificationsPreview();
});

document.addEventListener('DOMContentLoaded', function() {
const progressSteps = document.querySelectorAll('#progressbar li');
const fieldsets = document.querySelectorAll('fieldset');

function navigateToStep(clickedIndex) {
    // Hide all fieldsets and remove 'active' class from all steps
    fieldsets.forEach((fieldset, index) => {
        fieldset.style.display = 'none'; // Hide all fieldsets
        if (index <= clickedIndex) {
            progressSteps[index].classList.add('active'); // Mark previous steps as active
        } else {
            progressSteps[index].classList.remove('active'); // Ensure next steps are not marked active
        }
    });

    // Show the fieldset corresponding to the clicked step
    fieldsets[clickedIndex].style.display = 'block';
}

// Attach click event listeners to each step in the progress bar
progressSteps.forEach((step, index) => {
    step.addEventListener('click', () => {
        navigateToStep(index);
    });
});

// Existing functionality for next and previous buttons
$(".next").click(function() {
    let current_fs = $(this).parent();
    let next_fs = $(this).parent().next();
    let currentStepIndex = $("fieldset").index(current_fs);

    // Activate the next step on the progressbar
    $("#progressbar li").eq(currentStepIndex + 1).addClass('active');

    // Show the next fieldset
    next_fs.show();
    // Hide the current fieldset with style
    current_fs.animate({opacity: 0}, {
        step: function(now, mx) {
            let scale = 1 - (1 - now) * 0.2;
            let left = (now * 50) + "%";
            let opacity = 1 - now;
            current_fs.css({
                'transform': 'scale(' + scale + ')',
                'position': 'absolute'
            });
            next_fs.css({'left': left, 'opacity': opacity});
        },
        duration: 800,
        complete: function() {
            current_fs.hide();
            current_fs.css('position', 'relative');
        }
    });
});

$(".previous").click(function() {
    let current_fs = $(this).parent();
    let previous_fs = $(this).parent().prev();
    let currentStepIndex = $("fieldset").index(current_fs);

    // De-activate the current step and activate the previous step on the progressbar
    $("#progressbar li").eq(currentStepIndex).removeClass('active');

    // Show the previous fieldset
    previous_fs.show();
    current_fs.animate({opacity: 0}, {
        step: function(now, mx) {
            let scale = 0.8 + (1 - now) * 0.2;
            let left = ((1 - now) * 50) + "%";
            let opacity = 1 - now;
            current_fs.css({'left': left});
            previous_fs.css({'transform': 'scale(' + scale + ')', 'opacity': opacity});
        },
        duration: 800,
        complete: function() {
            current_fs.hide();
            current_fs.css('position', 'relative');
        }
    });
});
});

document.addEventListener('DOMContentLoaded', function() {
const textarea = document.getElementById('profile-summary');

function adjustHeight(el) {
    el.style.height = 'auto';
    el.style.height = (el.scrollHeight) + 'px';
}

// Adjust height for Professional Summary textarea
textarea.addEventListener('input', function() {
    adjustHeight(textarea);
});

// Adjust height for all Responsibilities textareas
const responsibilitiesTextareas = document.querySelectorAll('textarea[name="responsibilities[]"]');
responsibilitiesTextareas.forEach(function(textarea) {
    adjustHeight(textarea); // Initial adjustment
    textarea.addEventListener('input', function() {
        adjustHeight(textarea);
    });
});

// Adjust height for new Responsibilities textareas dynamically added
document.querySelector('.add-another').addEventListener('click', function() {
    setTimeout(function() {
        const newTextareas = document.querySelectorAll('textarea[name="responsibilities[]"]');
        newTextareas.forEach(function(textarea) {
            textarea.removeEventListener('input', adjustHeight); // Avoid duplicate listeners
            textarea.addEventListener('input', function() {
                adjustHeight(textarea);
            });
        });
    }, 100); // Delay to allow DOM update
});

// Initial adjustment on page load
adjustHeight(textarea);
});

$(document).ready(function () {
// Function to handle adding new sections with delete functionality
function addNewSection(containerSelector, entryClass, buttonSelector) {
    $(buttonSelector).click(function () {
        var newEntry = $(containerSelector + ' ' + entryClass).first().clone(); // Clone the first entry
        newEntry.find('input').val(''); // Clear input fields
        newEntry.find('.delete-btn').remove(); // Remove any existing delete buttons in the clone
        newEntry.append('<button type="button" class="delete-btn">Delete</button>'); // Add a new delete button

        $(containerSelector).append(newEntry); // Append the new entry to the container

        // Add delete button functionality to the new entry
        newEntry.find('.delete-btn').click(function () {
            $(this).parent().remove();
        });
    });
}

// Initialize the functionality for Languages
addNewSection('.languages-container', '.language-entry', '#languages .add-another');

// Initialize the functionality for Interests and Hobbies
addNewSection('.hobbies-container', '.hobby-entry', '#hobbies-languages .add-another');

// Ensure delete buttons are functional for initial items
$('.delete-btn').click(function () {
    $(this).parent().remove();
});
});

$(document).ready(function () {
function addReference() {
    // Clone the first '.referees-item', clear the input values, and ensure there's only one delete button
    var originalEntry = $('#references .referees-item').first().clone();
    originalEntry.find('input').val(''); // Clear the values in the cloned inputs
    originalEntry.find('.delete-btn').remove(); // Remove any existing delete buttons

    // Create a new delete button and append it to the cloned entry
    var deleteButton = $('<button type="button" class="delete-btn">Delete</button>');
    originalEntry.append(deleteButton);

    // Insert the new entry before the "Add Another" button
    $('#references .add-another').before(originalEntry);

    // Attach event to the new delete button in the cloned entry
    deleteButton.click(function() {
        $(this).parent().remove();
    });
}

// Attach the addReference function to the "Add Another" button
$('#references .add-another').click(function() {
    addReference();
});

// Attach a click event handler for the initial delete button in the HTML
$(document).on('click', '.delete-btn', function () {
    $(this).parent().remove();
});
});

    document.getElementById('responsibilities').addEventListener('input', function() {
            const inputText = this.value;
            const lines = inputText.split('\n');
            const listItems = lines.map(line => `<li>${line}</li>`).join('');
            document.getElementById('responsibilities-list').innerHTML = listItems;
        });


    const textarea = document.getElementById('profile-summary');

    function adjustHeight(el) {
    el.style.height = 'auto';
    el.style.height = (el.scrollHeight) + 'px';
    }

    textarea.addEventListener('input', function() {
    adjustHeight(textarea);
    });

    // Initial adjustment on page load
    adjustHeight(textarea);

    document.getElementById('profile-upload').addEventListener('change', function(event) {
        const file = event.target.files[0];
        const reader = new FileReader();

        reader.onload = function(e) {
            document.getElementById('cv-image').src = e.target.result;
        }

        if (file) {
            reader.readAsDataURL(file);
        }
    });

    document.addEventListener('DOMContentLoaded', function () {
    const firstNameInput = document.getElementById('firstname');
    const lastNameInput = document.querySelector('input[name="lname"]');
    const previewName = document.getElementById('preview-name');
    const jobTitleInput = document.getElementById('job_title');
    const summaryInput = document.getElementById('profile-summary'); // Corrected variable name
    const emailInput = document.getElementById('email');
    const phoneInput = document.getElementById('phone');
    const nationalityInput = document.getElementById('nationality');
    
    const previewTitle = document.getElementById('preview-title');
    const previewSummary = document.getElementById('preview-summary');
    const previewContacts = document.getElementById('preview-contacts');
    
    function updatePreviewName() {
        const firstName = firstNameInput.value.trim();
        const lastName = lastNameInput.value.trim();
        previewName.value = `${firstName} ${lastName}`;
    }

    function updatePreviewContacts() {
        const email = emailInput.value.trim();
        const phone = phoneInput.value.trim();
        const nationality = nationalityInput.value.trim();
        previewContacts.value = `${email}  ${phone}  ${nationality}`;
    }

    function updatePreviewTitle() {
        const jobTitle = jobTitleInput.value.trim();
        previewTitle.value = `${jobTitle}`;
    }

    function updatePreviewSummary() {
        const summary = summaryInput.value.trim();
        previewSummary.value = `${summary}`;
    }

    firstNameInput.addEventListener('input', updatePreviewName);
    lastNameInput.addEventListener('input', updatePreviewName);
    jobTitleInput.addEventListener('input', updatePreviewTitle);
    summaryInput.addEventListener('input', updatePreviewSummary);
    emailInput.addEventListener('input', updatePreviewContacts);
    phoneInput.addEventListener('input', updatePreviewContacts);
    nationalityInput.addEventListener('input', updatePreviewContacts);

    // Initialize the preview with any existing data
    updatePreviewName();
    updatePreviewTitle();
    updatePreviewSummary();
    updatePreviewContacts();
    });

    $(document).ready(function () {
        var current_fs, next_fs, previous_fs;
        var opacity;

        $(".next").click(function () {
            current_fs = $(this).parent();
            next_fs = $(this).parent().next();

            $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

            next_fs.show();
            current_fs.animate({ opacity: 0 }, {
                step: function (now) {
                    opacity = 1 - now;
                    current_fs.css({
                        'display': 'none',
                        'position': 'relative'
                    });
                    next_fs.css({ 'opacity': opacity });
                },
                duration: 600
            });
        });

        $(".previous").click(function () {
            current_fs = $(this).parent();
            previous_fs = $(this).parent().prev();

            $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

            previous_fs.show();

            current_fs.animate({ opacity: 0 }, {
                step: function (now) {
                    opacity = 1 - now;
                    current_fs.css({
                        'display': 'none',
                        'position': 'relative'
                    });
                    previous_fs.css({ 'opacity': opacity });
                },
                duration: 600
            });
        });

        $(".add-another").click(function () {
            var container = $(this).siblings('.work-experience-container, .education-item, .certification-item, .skills-container').last();
            var entryClone = container.clone().find('input').val('').end().find('textarea').val('').end();
            $(this).before(entryClone);
        });

        $(document).on('click', '.delete-btn', function () {
            $(this).parent().remove();
        });
    });

    document.addEventListener('DOMContentLoaded', function() {
    var dobInput = document.getElementById('dateofbirth');
    dobInput.type = 'text'; // Start with type text
    dobInput.addEventListener('focus', function() {
        this.type = 'date';
    });
    dobInput.addEventListener('blur', function() {
        if (!this.value) this.type = 'text';
    });
});

    $(document).ready(function () {
        var currentYear = new Date().getFullYear(); 

        $("#dateofbirth").datepicker({
            dateFormat: "mm/dd/yy",
            changeMonth: true,
            changeYear: true,
            yearRange: "1900:" + currentYear
        });
    });

   document.addEventListener('DOMContentLoaded', function () {
    const addAnotherButton = document.querySelector('.add-another');
    const experienceList = document.getElementById('experience-list');

    function updateExperiencePreview() {
        // Clear previous entries
        experienceList.innerHTML = '';

        // Get all work experience entries
        const workExperienceEntries = document.querySelectorAll('.work-experience-entry');

        workExperienceEntries.forEach(entry => {
            const company = entry.querySelector('input[name="company[]"]').value.trim();
            const role = entry.querySelector('input[name="role[]"]').value.trim();
            const tenure = entry.querySelector('input[name="tenure[]"]').value.trim();
            const responsibilityElement = entry.querySelector('textarea[name^="responsibilities"]');
        const responsibilities = responsibilityElement ? responsibilityElement.value.trim().split('\n') : [];

            // Create a new experience block
            const experienceBlock = document.createElement('div');
            const experienceHTML = `
                <h3>${company}</h3>
                <h4><span>${role}</span> <span>${tenure}</span></h4>
                <ul>
                    ${responsibilities.map(item => `<li>${item}</li>`).join('')}
                </ul>
            `;
            experienceBlock.innerHTML = experienceHTML;
            experienceList.appendChild(experienceBlock);
        });
    }

    // Listen for changes in the work experience fields
    document.querySelectorAll('.work-experience-entry input, .work-experience-entry textarea').forEach(input => {
        input.addEventListener('input', updateExperiencePreview);
    });

    // Update the preview when a new entry is added
    addAnotherButton.addEventListener('click', function () {
        setTimeout(() => {
            document.querySelectorAll('.work-experience-entry input, .work-experience-entry textarea').forEach(input => {
                input.removeEventListener('input', updateExperiencePreview); // Avoid multiple bindings
                input.addEventListener('input', updateExperiencePreview);
            });
            updateExperiencePreview(); // Update preview immediately after adding a new entry
        }, 100); // Short delay to ensure the new entry is added
    });

    $(document).on('click', '.delete-btn', function () {
        $(this).parent().remove();
        updateExperiencePreview();
    });

    // Initialize preview with any existing data
    updateExperiencePreview();
});


document.addEventListener('DOMContentLoaded', function () {
const addAnotherEducationButton = document.querySelector('#education .add-another');
const educationList = document.getElementById('education-list');

function updateEducationPreview() {
    // Clear previous entries
    educationList.innerHTML = '';

    // Get all education entries
    const educationEntries = document.querySelectorAll('.education-item');

    educationEntries.forEach(entry => {
        const school = entry.querySelector('input[name="school[]"]').value.trim();
        const qualification = entry.querySelector('input[name="qualification[]"]').value.trim();
        const tenure = entry.querySelector('input[name="tenure[]"]').value.trim();

        // Create a new education block
        const educationBlock = document.createElement('div');
        const educationHTML = `
            <h3>${school}</h3>
            <h4>${qualification} <span>${tenure}</span></h4>
        `;
        educationBlock.innerHTML = educationHTML;
        educationList.appendChild(educationBlock);
    });
}

function attachInputListeners() {
    document.querySelectorAll('.education-item input').forEach(input => {
        input.removeEventListener('input', updateEducationPreview); // Avoid multiple bindings
        input.addEventListener('input', updateEducationPreview);
    });
}

// Listen for changes in the education fields
attachInputListeners();

// Update the preview when a new education entry is added
addAnotherEducationButton.addEventListener('click', function () {
    setTimeout(() => {
        attachInputListeners();
        updateEducationPreview(); // Update preview immediately after adding a new entry
    }, 100); // Short delay to ensure the new entry is added
});

// Listen for delete button clicks
$(document).on('click', '.delete-btn', function () {
    $(this).parent().remove();
    updateEducationPreview();
});

// Initialize preview with any existing data
updateEducationPreview();
});

document.addEventListener('DOMContentLoaded', function() {
const addAnotherSkillButton = document.querySelector('#skills-languages .add-another');
const skillsList = document.getElementById('skills-list');
function updateSkillsPreview() {
    // Clear previous entries
    skillsList.innerHTML = '';

    // Get all skill entries
    const skillEntries = document.querySelectorAll('.skills-container input[name="skill[]"]');

    skillEntries.forEach(entry => {
        const skill = entry.value.trim();

        // Create a new skill block, assuming you want each skill to be shown as a list item
        const skillItem = document.createElement('li');
        skillItem.textContent = skill;
        skillsList.appendChild(skillItem);
    });
}

function attachSkillInputListeners() {
    document.querySelectorAll('.skills-container input').forEach(input => {
        input.removeEventListener('input', updateSkillsPreview); // Avoid multiple bindings
        input.addEventListener('input', updateSkillsPreview);
    });
}

// Listen for changes in the skills fields
attachSkillInputListeners();

// Update the preview when a new skill entry is added
addAnotherSkillButton.addEventListener('click', function() {
    setTimeout(() => {
        attachSkillInputListeners();
        updateSkillsPreview(); // Update preview immediately after adding a new entry
    }, 100); // Short delay to ensure the new entry is added
});

// Listen for delete button clicks
$(document).on('click', '.delete-btn', function() {
    $(this).parent().remove();
    updateSkillsPreview();
});

// Initialize preview with any existing data
updateSkillsPreview();
});


document.addEventListener('DOMContentLoaded', function() {
const progressSteps = document.querySelectorAll('#progressbar li');
const fieldsets = document.querySelectorAll('fieldset');

function navigateToStep(clickedIndex) {
    // Remove 'active' class from all steps and hide all fieldsets
    progressSteps.forEach((step, index) => {
        step.classList.remove('active');
        fieldsets[index].style.display = 'none';
    });

    // Add 'active' class back to the clicked step and all previous steps
    for (let i = 0; i <= clickedIndex; i++) {
        progressSteps[i].classList.add('active');
    }

    // Show the corresponding fieldset
    fieldsets[clickedIndex].style.display = 'block';
}

// Attach click event listeners to each step in the progress bar
progressSteps.forEach((step, index) => {
    step.addEventListener('click', () => {
        navigateToStep(index);
    });
});

// Existing functionality for next and previous buttons
$(".next").click(function() {
    let current_fs = $(this).parent();
    let next_fs = $(this).parent().next();
    let currentStepIndex = $("fieldset").index(current_fs);

    // Activate the next step on the progressbar
    $("#progressbar li").eq(currentStepIndex + 1).addClass('active');

    // Show the next fieldset
    next_fs.show();
    // Hide the current fieldset with style
    current_fs.animate({opacity: 0}, {
        step: function(now, mx) {
            // As the opacity of current_fs reduces to 0 - stored in "now"
            // 1. Scale current_fs down to 80%
            // 2. Bring next_fs from the right(50%)
            let scale = 1 - (1 - now) * 0.2;
            let left = (now * 50) + "%";
            let opacity = 1 - now;
            current_fs.css({
                'transform': 'scale(' + scale + ')',
                'position': 'absolute'
            });
            next_fs.css({'left': left, 'opacity': opacity});
        },
        duration: 800,
        complete: function() {
            current_fs.hide();
            current_fs.css('position', 'relative'); // Reset position to avoid CSS conflict with direct clicks
        }
    });
});

$(".previous").click(function() {
    let current_fs = $(this).parent();
    let previous_fs = $(this).parent().prev();
    let currentStepIndex = $("fieldset").index(current_fs);

    // De-activate the current step and activate the previous step on the progressbar
    $("#progressbar li").eq(currentStepIndex).removeClass('active');

    // Show the previous fieldset
    previous_fs.show();
    // Hide the current fieldset with style
    current_fs.animate({opacity: 0}, {
        step: function(now, mx) {
            // As the opacity of current_fs reduces to 0 - stored in "now"
            // 1. Scale previous_fs from 80% to 100%
            // 2. Take current_fs to the right(50%) - from 0%
            let scale = 0.8 + (1 - now) * 0.2;
            let left = ((1 - now) * 50) + "%";
            let opacity = 1 - now;
            current_fs.css({'left': left});
            previous_fs.css({'transform': 'scale(' + scale + ')', 'opacity': opacity});
        },
        duration: 800,
        complete: function() {
            current_fs.hide();
            current_fs.css('position', 'relative'); // Reset position to avoid CSS conflict with direct clicks
        }
    });
});
});


const fileInput = document.getElementById('profile-upload');
const fileNameDisplay = document.querySelector('.file-name');

fileInput.addEventListener('change', function() {
    const fileName = this.files.length > 0 ? this.files[0].name : 'No file chosen...';
    fileNameDisplay.textContent = fileName;
});

document.querySelector('.file-upload-button').addEventListener('click', function() {
    fileInput.click();
});

document.addEventListener('DOMContentLoaded', function() {
const addAnotherReferencesButton = document.querySelector('#references .add-another');

// Function to add a new reference entry dynamically
function addReference() {
    const container = document.querySelector('#references'); // Container for reference entries
    const originalEntry = container.querySelector('.referees-item');
    const newEntry = originalEntry.cloneNode(true); // Clone the first reference item

    // Clear the values in the cloned inputs
    newEntry.querySelectorAll('input').forEach(input => {
        input.value = '';
    });

    // Attach event to the new delete button in the cloned entry
    newEntry.querySelector('.delete-btn').addEventListener('click', function() {
        this.parentElement.remove();
        updateReferencesPreview(); // Update the list display after an entry is removed
    });

    container.insertBefore(newEntry, addAnotherReferencesButton); // Insert the new entry before the "Add Another" button
}

// Attach the addReference function to the "Add Another" button
addAnotherReferencesButton.addEventListener('click', function() {
    addReference();
    updateReferencesPreview(); // Update the list display after adding a new entry
});

// Function to update the references list display
function updateReferencesPreview() {
    const referencesList = document.getElementById('References-list');
    referencesList.innerHTML = ''; // Clear current list

    // Query all current entries and add them to the preview list
    const allEntries = document.querySelectorAll('.referees-item');
    allEntries.forEach((entry, index) => {
        const referee = entry.querySelector('input[name="Referees[]"]').value.trim();
        const company = entry.querySelector('input[name="Company[]"]').value.trim();
        const contact = entry.querySelector('input[name="contact[]"]').value.trim();

        if (referee && company && contact) { // Only add entries with all fields filled
            const listItem = document.createElement('li');
            listItem.textContent = `${referee} from ${company} - Contact: ${contact}`;
            referencesList.appendChild(listItem);
        }
    });
}

// Initial display update
updateReferencesPreview();

// Ensure delete buttons in existing entries are functional
document.querySelectorAll('.delete-btn').forEach(button => {
    button.addEventListener('click', function() {
        this.parentElement.remove();
        updateReferencesPreview();
    });
});
});


</script>
</body>
</html>
